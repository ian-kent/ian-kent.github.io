<!DOCTYPE html>
<html class="no-js" lang="en-US" prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#">
<head>
    <meta charset="utf-8">

    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="description" content="">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1">


<meta name="keywords" content="Cloud, IaaS, Mesos, ">

 
<meta property="og:type" content="article"/>
<meta property="og:description" content=""/>
<meta property="og:title" content="A quick introduction to Apache Mesos : iankent.uk"/>
<meta property="og:site_name" content="Ian Kent"/>
<meta property="og:image" content="" />
<meta property="og:image:type" content="image/jpeg" />
<meta property="og:image:width" content="" />
<meta property="og:image:height" content="" />
<meta property="og:url" content="http://localhost:1313/post/a-quick-introduction-to-apache-mesos/">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2014-02-26"/>
<meta property="article:modified_time" content="2014-02-26"/>



<meta property="article:tag" content="Cloud">
<meta property="article:tag" content="IaaS">
<meta property="article:tag" content="Mesos">




<meta name="twitter:card" content="summary">

<meta name="twitter:site" content="@iankent">
<meta name="twitter:title" content="A quick introduction to Apache Mesos : iankent.uk">
<meta name="twitter:creator" content="@iankent">
<meta name="twitter:description" content="">
<meta name="twitter:image:src" content="">
<meta name="twitter:domain" content="iankent.uk">


    <base href="http://localhost:1313">
    <title> A quick introduction to Apache Mesos - iankent.uk </title>
    <link rel="canonical" href="http://localhost:1313/post/a-quick-introduction-to-apache-mesos/">
    

    <link href='http://fonts.googleapis.com/css?family=Fjalla+One|Open+Sans:300' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="/static/css/style.css">

    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
</head>

<body lang="en" itemscope itemtype="http://schema.org/Article">
<header id="header">
    <figure>
      <a href="/" border=0 id="logolink"><div class="icon-spf13-3" id="logo"> </div></a>
    </figure>
    <div id="byline">by Ian Kent</div>
    <nav id="nav">
            <ul id="mainnav">
            <li>
                <a href="/post/">
                <span class="icon"> <i aria-hidden="true" class="icon-quill"></i></span>
                <span> blog </span>
            </a>
            </li>
            <li>
            <a href="/project/">
                <span class="icon"> <i aria-hidden="true" class="icon-console"></i></span>
                <span> code </span>
            </a>
            </li>
            <li>
            <a href="/presentation/">
                <span class="icon"> <i aria-hidden="true" class="icon-stats"></i></span>
                <span> talks </span>
            </a>
            </li>
            <li>
            <a href="http://stevefrancia.com">
                <span class="icon"> <i aria-hidden="true" class="icon-13"></i></span>
                <span> me </span>
            </a>
            </li>
        </ul>

            <ul id="social">
            <li id="share">
                <span class="icon icon-bubbles"> </span>
                <span class="title"> share </span>
                <div class="dropdown share">
                    <ul class="social">
                      <li> <a href="https://twitter.com/intent/tweet?status=A%20quick%20introduction%20to%20Apache%20Mesos-http%3a%2f%2flocalhost%3a1313%2fpost%2fa-quick-introduction-to-apache-mesos%2f" target="_blank" title="Follow me on Twitter" class="twitter"><span class="icon icon-twitter"></span>Twitter</a> </li>
                        <li> <a href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fpost%2fa-quick-introduction-to-apache-mesos%2f" target="_blank" title="Join me on Facebook" class="facebook"><span class="icon icon-facebook"></span>Facebook</a> </li>
                        <li> <a href="https://plus.google.com/share?url=http%3a%2f%2flocalhost%3a1313%2fpost%2fa-quick-introduction-to-apache-mesos%2f" target="_blank" title="Google+" class="googleplus"><span class="icon icon-google-plus"></span>Google+</a> </li>
                        <li> <a href="http://www.linkedin.com/shareArticle?mini=true&url=http%3a%2f%2flocalhost%3a1313%2fpost%2fa-quick-introduction-to-apache-mesos%2f&title=A%20quick%20introduction%20to%20Apache%20Mesos&source=spf13" target="_blank" title="LinkedIn" class="linkedin"><span class="icon icon-linkedin"></span>LinkedIn</a> </li>
                        <li> <a href="http://del.icio.us/post?url=http%3a%2f%2flocalhost%3a1313%2fpost%2fa-quick-introduction-to-apache-mesos%2f" target="_blank" title="Delicious" class="delicious"><span class="icon icon-delicious"></span>Delicious</a> </li>
                        <li> <a href="http://www.reddit.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fpost%2fa-quick-introduction-to-apache-mesos%2f" target="_blank" title="Reddit" class="reddit"><span class="icon icon-reddit"></span>Reddit</a> </li>
                        <li> <a href="http://www.stumbleupon.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fpost%2fa-quick-introduction-to-apache-mesos%2f" target="_blank" title="StumbleUpon" class="stumbleupon"><span class="icon icon-stumbleupon"></span>StumbleUpon</a> </li>
                    </ul>
                    <span class="subcount">sharing is caring</span>
                </div>
            </li>
            <li id="follow">
                <span class="icon icon-rocket"> </span>
                <span class="title"> follow </span>
                <div class="dropdown follow">
                    <ul class="social">
                        <li> <a href="http://feeds.feedburner.com/spf13" target="_blank" title="Subscribe by RSS" class="rss"><span class="icon icon-feed-2"></span>RSS</a> </li>
                        <li> <a href="http://www.twitter.com/iankent" target="_blank" title="Follow me on Twitter" class="twitter"><span class="icon icon-twitter"></span>Twitter</a> </li>
                        <li> <a href="http://github.com/ian-kent" target="_blank" title="GitHub" class="github"><span class="icon icon-github"></span>GitHub</a> </li>
                    </ul>
                    <span class="subcount">join 10k+ subscribers &amp; followers</span>
                </div>
            </li>
        </ul>

    </nav>
</header>



<section id="main">
  <h1 itemprop="name" id="title">A quick introduction to Apache Mesos</h1>
  <div>
        <article itemprop="articleBody" id="content">
           

<p><a href="http://mesos.apache.org/">Apache Mesos</a> is a centralised fault-tolerant cluster manager. It&rsquo;s designed for distributed computing environments to provide resource isolation and management across a cluster of slave nodes.</p>

<p>In some ways, Mesos provides the opposite to virtualisation:</p>

<ul>
<li><p>Virtualisation splits a single physical resource into multiple virtual resources</p></li>

<li><p>Mesos joins multiple physical resources into a single virtual resource</p></li>
</ul>

<p>It schedules CPU and memory resources across the cluster in much the same way the Linux Kernel schedules local resources.</p>

<p>A Mesos cluster is made up of four major components:</p>

<ul>
<li><p>ZooKeepers</p></li>

<li><p>Mesos masters</p></li>

<li><p>Mesos slaves</p></li>

<li><p>Frameworks</p></li>
</ul>

<h3 id="zookeeper:d12db87a3f4ce64d7023ff8451a41464">ZooKeeper</h3>

<p><a href="http://zookeeper.apache.org/">Apache ZooKeeper</a> is a centralised configuration manager, used by distributed applications such as Mesos to coordinate activity across a cluster.</p>

<p>Mesos uses ZooKeeper to elect a leading master and for slaves to join the cluster.</p>

<h3 id="mesos-masters:d12db87a3f4ce64d7023ff8451a41464">Mesos masters</h3>

<p>A Mesos master is a Mesos instance in control of the cluster.</p>

<p>A cluster will typically have multiple Mesos masters to provide fault-tolerance, with one instance elected the leading master.</p>

<h3 id="mesos-slaves:d12db87a3f4ce64d7023ff8451a41464">Mesos slaves</h3>

<p>A Mesos slave is a Mesos instance which offers resources to the cluster.</p>

<p>They are the &lsquo;worker&rsquo; instances - tasks are allocated to the slaves by the Mesos master.</p>

<h3 id="frameworks:d12db87a3f4ce64d7023ff8451a41464">Frameworks</h3>

<p>On its own, Mesos only provides the basic &ldquo;kernel&rdquo; layer of your cluster. It lets other applications request resources in the cluster to perform tasks, but does nothing itself.</p>

<p>Frameworks bridge the gap between the Mesos layer and your applications. They are higher level abstractions which simplify the process of launching tasks on the cluster.</p>

<h4 id="chronos:d12db87a3f4ce64d7023ff8451a41464">Chronos</h4>

<p><a href="https://github.com/airbnb/chronos">Chronos</a> is a cron-like fault-tolerant scheduler for a Mesos cluster.</p>

<p>You can use it to schedule jobs, receive failure and completion notifications, and trigger other dependent jobs.</p>

<h4 id="marathon:d12db87a3f4ce64d7023ff8451a41464">Marathon</h4>

<p><a href="https://github.com/mesosphere/marathon">Marathon</a> is the equivalent of the Linux upstart or init daemons, designed for long-running applications.</p>

<p>You can use it to start, stop and scale applications across the cluster.</p>

<h4 id="others:d12db87a3f4ce64d7023ff8451a41464">Others</h4>

<p>There are a few other frameworks:</p>

<ul>
<li><p><a href="http://aurora.apache.org/">Aurora</a> - service scheduler</p></li>

<li><p><a href="http://hadoop.apache.org/">Hadoop</a> - data processing</p></li>

<li><p><a href="https://github.com/jenkinsci/mesos-plugin">Jenkins</a> - Jenkins slave manager</p></li>

<li><p><a href="http://spark.apache.org/">Spark</a> - data processing</p></li>

<li><p><a href="http://www.adaptivecomputing.com/products/open-source/torque/">Torque</a> - resource manager</p></li>
</ul>

<p>You can also <a href="http://mesos.apache.org/documentation/latest/">write your own framework</a>, using Java, Python or C++.</p>

<h2 id="the-quick-start-guide:d12db87a3f4ce64d7023ff8451a41464">The quick start guide</h2>

<p>If you want to get a Mesos cluster up and running, you have a few options:</p>

<h3 id="using-vagrant:d12db87a3f4ce64d7023ff8451a41464">Using Vagrant</h3>

<p><a href="http://www.vagrantup.com">Vagrant</a> and the <a href="https://github.com/everpeace/vagrant-mesos">vagrant-mesos</a> Vagrantfile can help you quickly build:</p>

<ul>
<li><p>a standalone Mesos instance</p></li>

<li><p>a multi-machine Mesos cluster of ZooKeepers, masters and slaves</p></li>
</ul>

<p>Unfortunately, the network configuration is a bit difficult to work with - it uses a private network between the VMs, and SSH tunnelling to provide access to the cluster.</p>

<h3 id="using-mesosphere-and-amazon-web-services:d12db87a3f4ce64d7023ff8451a41464">Using Mesosphere and Amazon Web Services</h3>

<p><a href="http://mesosphere.io/">Mesosphere</a> provide <a href="https://elastic.mesosphere.io/">Elastic Mesosphere</a>, which can quickly launch a Mesos cluster using <a href="http://aws.amazon.com/ec2/">Amazon EC2</a>.</p>

<p>This is far easier to work with than the Vagrant build, but it isn&rsquo;t free - around $1.50 an hour for 6 instances or $4.50 for 18.</p>

<h3 id="a-simpler-vagrant-build:d12db87a3f4ce64d7023ff8451a41464">A simpler Vagrant build</h3>

<p>I&rsquo;ve put together some Vagrantfiles to build individual components of a Mesos cluster. It&rsquo;s a work in progress, but it can already build a working Mesos cluster without the networking issues. It uses bridged networking, with dynamically assigned IPs, so all instances can be accessed directly through your local network.</p>

<p>You&rsquo;ll need the following GitHub repositories:</p>

<ul>
<li><p><a href="https://github.com/ian-kent/vagrant-zookeeper">ian-kent/vagrant-zookeeper</a></p></li>

<li><p><a href="https://github.com/ian-kent/vagrant-mesos-master">ian-kent/vagrant-mesos-master</a></p></li>

<li><p><a href="https://github.com/ian-kent/vagrant-mesos-slave">ian-kent/vagrant-mesos-slave</a></p></li>
</ul>

<p>At the moment, a cluster is limited to one ZooKeeper, but can support multiple Mesos masters and slaves.</p>

<p>Each of the instances is also built with <a href="http://serfdom.io">Serf</a> to provide decentralised service discovery. You can use <code>serf members</code> from any instance to list all other instances.</p>

<p>To help test deployments, there&rsquo;s also a MongoDB build with Serf installed:</p>

<ul>
<li><a href="https://github.com/ian-kent/vagrant-mongodb">ian-kent/vagrant-mongodb</a></li>
</ul>

<p>Like the ZooKeeper instances, the MongoDB instance joins the same Serf cluster but isn&rsquo;t part of the Mesos cluster.</p>

<h2 id="once-your-cluster-is-running:d12db87a3f4ce64d7023ff8451a41464">Once your cluster is running</h2>

<p>You&rsquo;ll need to install a framework.</p>

<p>Mesosphere lets you choose to install Marathon on Amazon EC2, so that could be a good place to start.</p>

<p>Otherwise, manually installing and configuring Marathon or another framework is easy. The quick and dirty way is to install them on the Mesos masters, but it would be better if they had their own VMs.</p>

<p>With Marathon or Aurora, you can even run other frameworks in the Mesos cluster for scalability and fault-tolerance.</p>

        </article>
  </div>
</section>



<aside id="meta">

    <div>
        <section id="datecount">
          <h4 id="date"> Wed Feb 26, 2014 </h4>
          <h5 id="wc"> 700 Words </h5>
          <h5 id="readtime"> Read in about 4 Min </h5>
        </section>
        <ul id="categories">
          
        </ul>
        <ul id="tags">
          
            <li> <a href="http://localhost:1313/tags/cloud">Cloud</a> </li>
          
            <li> <a href="http://localhost:1313/tags/iaas">IaaS</a> </li>
          
            <li> <a href="http://localhost:1313/tags/mesos">Mesos</a> </li>
          
        </ul>
    </div>

    <div>
        <section id="prev">
            &nbsp;<a class="previous" href="http://localhost:1313/post/getting-started-with-hashicorp-serf/"><i class="icon-arrow-left"></i> Getting started with HashiCorp Serf</a><br>
        </section><section id="next">
            &nbsp;<a class="next" href="http://localhost:1313/post/the-automation-what-for/">The automation what-for <i class="icon-arrow-right"></i></a>
        </section>
    </div>

    <div>
        <section id="author">
             <h4>About the Author:</h4> 
                Steve Francia is the Chief Developer
                Advocate for <a href="http://mongodb.com">MongoDB</a>. He is a open
                source contributor and author of <a
                href="http://vim.spf13.com">spf13-vim</a>, <a
                href="http://hugo.spf13.com">Hugo</a> and <a
                href="http://github.com/spf13/cobra">Cobra</a>. You can find him on <a href="http://twitter.com">Twitter</a>,
                <a href="http://github.com/spf13">Github</a>, and <a title="Author: Steve Francia on Google+" rel="author"
                href="https://plus.google.com/+SteveFrancia/posts?rel=author"
                target="_blank">Google+</a>.
        </section>
    </div>

</aside>

<meta itemprop="wordCount" content="687">
<meta itemprop="datePublished" content="2014-02-26">
<meta itemprop="url" content="http://localhost:1313/post/a-quick-introduction-to-apache-mesos/">


<aside id=comments>
    <div><h2> Comments </h2></div>
    <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'iankent';
    var disqus_identifier = 'http:\/\/localhost:1313\/post\/a-quick-introduction-to-apache-mesos\/';
    var disqus_title = 'A quick introduction to Apache Mesos';
    var disqus_url = 'http:\/\/localhost:1313\/post\/a-quick-introduction-to-apache-mesos\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</aside>

<footer>
  <div>
    <p>
    &copy; 2014-15 <span itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Ian Kent.</span></span>
    <a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons Attribution">Some rights reserved</a>;
    please attribute properly and link back. <br>
    Powered by <a href="http://hugo.spf13.com">Hugo</a>.
        Hosted by <a href="https://pages.github.com/">GitHub Pages</a>.
    </p>
  </div>
</footer>
<script type="text/javascript">
(function(){var j=function(a,b){return window.getComputedStyle?getComputedStyle(a).getPropertyValue(b):a.currentStyle[b]};var k=function(a,b,c){if(a.addEventListener)a.addEventListener(b,c,false);else a.attachEvent('on'+b,c)};var l=function(a,b){for(key in b)if(b.hasOwnProperty(key))a[key]=b[key];return a};window.fitText=function(d,e,f){var g=l({'minFontSize':-1/0,'maxFontSize':1/0},f);var h=function(a){var b=e||1;var c=function(){a.style.fontSize=Math.max(Math.min(a.clientWidth/(b*10),parseFloat(g.maxFontSize)),parseFloat(g.minFontSize))+'px'};c();k(window,'resize',c)};if(d.length)for(var i=0;i<d.length;i++)h(d[i]);else h(d);return d}})();
fitText(document.getElementById('title'), 1)
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-47956770-1', 'auto');
  ga('require', 'displayfeatures');
  ga('send', 'pageview');
</script>
<script>document.write('<script src="http://'
        + (location.host || 'localhost').split(':')[0]
		+ ':1313/livereload.js?mindelay=10"></'
        + 'script>')</script></body>
</html>

